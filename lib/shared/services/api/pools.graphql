query GetPools(
  $first: Int
  $skip: Int
  $orderBy: GqlPoolOrderBy
  $orderDirection: GqlPoolOrderDirection
  $where: GqlPoolFilter
  $textSearch: String
) {
  pools: poolGetPools(
    first: $first
    skip: $skip
    orderBy: $orderBy
    orderDirection: $orderDirection
    where: $where
    textSearch: $textSearch
  ) {
    address
    chain
    createTime
    decimals
    displayTokens {
      id
      address
      name
      weight
      symbol
      nestedTokens {
        id
        address
        name
        weight
        symbol
      }
    }
    dynamicData {
      totalLiquidity
      lifetimeVolume
      lifetimeSwapFees
      volume24h
      fees24h
      holdersCount
      swapFee
      swapsCount
      totalShares
      apr {
        apr {
          ... on GqlPoolAprTotal {
            total
          }
          ... on GqlPoolAprRange {
            min
            max
          }
        }
        hasRewardApr
        thirdPartyApr {
          ... on GqlPoolAprTotal {
            total
          }
          ... on GqlPoolAprRange {
            min
            max
          }
        }
        nativeRewardApr {
          ... on GqlPoolAprTotal {
            total
          }
          ... on GqlPoolAprRange {
            min
            max
          }
        }
        swapApr
        items {
          id
          title
          apr {
            ... on GqlPoolAprTotal {
              total
            }
            ... on GqlPoolAprRange {
              min
              max
            }
          }
          subItems {
            id
            title
            apr {
              ... on GqlPoolAprTotal {
                total
              }
              ... on GqlPoolAprRange {
                min
                max
              }
            }
          }
        }
      }
    }
    factory
    id
    name
    owner
    symbol
    type
    userBalance {
      totalBalance
      totalBalanceUsd
      stakedBalance
      walletBalance
    }
  }
  count: poolGetPoolsCount(
    first: $first
    skip: $skip
    orderBy: $orderBy
    orderDirection: $orderDirection
    where: $where
    textSearch: $textSearch
  )
}

query GetFeaturedPools($chains: [GqlChain!]) {
  featuredPoolGroups: poolGetFeaturedPoolGroups(chains: $chains) {
    chain
    id
    icon
    title
    primary
    items {
      ... on GqlFeaturePoolGroupItemExternalLink {
        id
        image
        buttonText
        buttonUrl
      }
      ... on GqlPoolMinimal {
        ...GqlPoolCardData
      }
    }
  }
}

fragment GqlPoolCardData on GqlPoolMinimal {
  id
  address
  name
  type
  dynamicData {
    totalLiquidity
    totalShares
    apr {
      hasRewardApr
      thirdPartyApr {
        ... on GqlPoolAprTotal {
          total
        }
        ... on GqlPoolAprRange {
          min
          max
        }
      }
      nativeRewardApr {
        ... on GqlPoolAprTotal {
          total
        }
        ... on GqlPoolAprRange {
          min
          max
        }
      }
      swapApr
      apr {
        ... on GqlPoolAprTotal {
          total
        }
        ... on GqlPoolAprRange {
          min
          max
        }
      }
      items {
        id
        title
        apr {
          ... on GqlPoolAprTotal {
            total
          }
          ... on GqlPoolAprRange {
            min
            max
          }
        }
        subItems {
          id
          title
          apr {
            ... on GqlPoolAprTotal {
              total
            }
            ... on GqlPoolAprRange {
              min
              max
            }
          }
        }
      }
    }
  }
  allTokens {
    id
    address
    isNested
    isPhantomBpt
    weight
  }
  displayTokens {
    id
    address
    name
    weight
    symbol
    nestedTokens {
      id
      address
      name
      weight
      symbol
    }
  }
}
